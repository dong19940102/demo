<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<script type="text/javascript">
		window.onload=function(){
			var cvs=document.getElementById("cvs")
			cvs.innerHTML="jsiudhusduh"
			var ctx=cvs.getContext("2d")
			
			//初始状态
			ctx.lineWidth="16"
			var w=cvs.width
			var h=cvs.height
			var x=w/2
			var y=h/2
			var r=Math.min(w,h)/2-8
			var target=0.4; //取圆的0.4
			var progress=0; //半弧滚动的起始终止变化
			var total=10 // 滑动的时间
			function draw(){
				//限制滚动位置 要不然全动 
				
				if(progress>10){
					return false
				}
				ctx.clearRect(0,0,w,h)
				//起始结束位置
				var start=Math.PI*3/2*progress/total;
				var p=target*progress;
				var end=Math.PI*2*p/total+start;
				//先绘制一个大圆
				ctx.beginPath()
				ctx.strokeStyle="#87ceed"
				ctx.arc(x,y,r,0,Math.PI*2)
				ctx.stroke()
				ctx.closePath()
				//再次绘制一个半弧
				ctx.beginPath()
				ctx.strokeStyle="#8A2BE2"
				ctx.arc(x,y,r,start,end)
				
				ctx.stroke()
				ctx.closePath()
				
				ctx.font="30px arial";
				ctx.fillStyle="#008000"
				ctx.textAlign="center";
				ctx.textBaseline="middle";
				var p=(p*10).toFixed(2)+"%";
				ctx.fillText(p,250,250)
				
				progress++
			}
			draw()
			
			setInterval(draw,50)
		}
		
	</script>
	<body>
		<canvas id="cvs" width="500" height="500"></canvas>
	</body>
</html>
